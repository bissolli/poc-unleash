import{r as C,o as u,c as U,d as w,a as i,b as p,t as b,p as P,e as O,f as T,m as y,g as F,h as k,i as g,w as B,u as v,R as A,F as x,j as H,k as S,l as m,n as V,q as c,s as _,v as D,x as q,y as K}from"./vendor.93770e2d.js";const j=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}};j();var E=(r,s)=>{const n=r.__vccOpts||r;for(const[a,e]of s)n[a]=e;return n};const z={};function Y(r,s){const n=C("RouterView");return u(),U(n)}var W=E(z,[["render",Y]]);const X=r=>(P("data-v-5a4bdf3c"),r=r(),O(),r),G={class:"greetings"},J={class:"green"},Q=X(()=>p("h3",null,"Choose between the 2 scenarios below",-1)),Z=w({props:{msg:null},setup(r){return(s,n)=>(u(),i("div",G,[p("h1",J,b(r.msg),1),Q]))}});var ee=E(Z,[["__scopeId","data-v-5a4bdf3c"]]);let h="off";const $=new T.UnleashClient({url:"https://unleash-proxy.dev-ap-south-1.cfood.xyz/proxy",clientKey:"some-secret",appName:"poc-unleash-client-app",refreshInterval:5}),te=async r=>{await $.updateContext({userId:r})},I=async()=>{if(h!=="connecting"){h="connecting";try{await $.start(),h="on"}catch{h="off"}}},M=async r=>(N()||await I(),$.getVariant(r)),N=()=>h==="on";let R=!1;const ne=async r=>{y.identify(r)},oe=async()=>{R=!0,y.init("353ccd1349e6c925e87612a06201458e",{debug:!0})},ae=()=>R,se={class:"wrapper"},re=S("Alpha"),ue=S("Beta"),ie={class:"scenario"},le=w({setup(r){const{query:s}=H(),n=F(()=>{const t=Array.isArray(s.id)?s.id[0]:s.id;return typeof t=="string"?t:null}),a=async()=>(N()||(n.value&&await te(n.value),await I()),!0),e=async()=>(ae()||(await oe(),n.value&&await ne(n.value)),!0);return k(async()=>{await Promise.all([e(),a()])}),(t,d)=>{const l=C("RouterView");return u(),i(x,null,[p("header",null,[p("div",se,[g(ee,{msg:"A/B Testing POC - Unleash"}),p("nav",null,[g(v(A),{to:{name:"alpha",query:v(s)}},{default:B(()=>[re]),_:1},8,["to"]),g(v(A),{to:{name:"beta",query:v(s)}},{default:B(()=>[ue]),_:1},8,["to"])])])]),p("div",ie,[g(l)])],64)}}}),ce={key:0},pe={key:0},de={key:1},ve={key:2},_e={key:3},fe=w({setup(r){const s=m("flow-b"),n=m(1);let a=m();const e="alpha-experimentation",t=l=>{var o;y.track("Moved to step "+l,{flag:e,variant:(o=a.value)==null?void 0:o.name}),n.value=l},d=async()=>{a.value=await M(e),a.value.name!=="disabled"&&(s.value=a.value.name)};return k(()=>{d()}),V(()=>{var l;y.track("Started alpha experimentation",{flag:e,variant:(l=a.value)==null?void 0:l.name})}),(l,o)=>(u(),i(x,null,[p("div",null,[p("p",null,"Flag: "+b(e)),v(a)?(u(),i("p",ce,"Variant: "+b(v(a).name),1)):c("",!0)]),n.value===1?(u(),i("div",pe,[p("button",{class:"button",onClick:o[0]||(o[0]=_(f=>t(2),["prevent"]))},"Button A")])):c("",!0),n.value===2?(u(),i("div",de,[s.value==="flow-b"?(u(),i("button",{key:0,class:"button",onClick:o[1]||(o[1]=_(f=>t(3),["prevent"]))}," Button B ")):c("",!0),s.value==="flow-c"?(u(),i("button",{key:1,class:"button",onClick:o[2]||(o[2]=_(f=>t(3),["prevent"]))}," Button C ")):c("",!0)])):c("",!0),n.value===3?(u(),i("div",ve,[p("button",{class:"button",onClick:o[3]||(o[3]=_(f=>t(4),["prevent"]))},"Button D")])):c("",!0),n.value===4?(u(),i("div",_e,"Awesome!!!")):c("",!0)],64))}}),me={key:0},ye={key:0},he={key:1},be={key:2},ge={key:3},we=w({setup(r){const s=m("flow-b"),n=m(1);let a=m();const e="beta-experimentation",t=l=>{var o;y.track("Moved to step "+l,{flag:e,variant:(o=a.value)==null?void 0:o.name}),n.value=l},d=async()=>{a.value=await M(e),a.value.name!=="disabled"&&(s.value=a.value.name)};return k(()=>{d()}),V(()=>{var l;y.track("Started beta experimentation",{flag:e,variant:(l=a.value)==null?void 0:l.name})}),(l,o)=>(u(),i(x,null,[p("div",null,[p("p",null,"Flag: "+b(e)),v(a)?(u(),i("p",me,"Variant: "+b(v(a).name),1)):c("",!0)]),n.value===1?(u(),i("div",ye,[s.value==="flow-b"?(u(),i("button",{key:0,class:"button",onClick:o[0]||(o[0]=_(f=>t(2),["prevent"]))}," Button B ")):c("",!0),s.value==="flow-c"?(u(),i("button",{key:1,class:"button",onClick:o[1]||(o[1]=_(f=>t(2),["prevent"]))}," Button C ")):c("",!0)])):c("",!0),n.value===2?(u(),i("div",he,[p("button",{class:"button",onClick:o[2]||(o[2]=_(f=>t(3),["prevent"]))},"Button A")])):c("",!0),n.value===3?(u(),i("div",be,[p("button",{class:"button",onClick:o[3]||(o[3]=_(f=>t(4),["prevent"]))},"Button D")])):c("",!0),n.value===4?(u(),i("div",ge,"Awesome!!!")):c("",!0)],64))}}),ke=D({history:q(),routes:[{path:"/",name:"home",component:le,children:[{path:"alpha",name:"alpha",component:fe},{path:"beta",name:"beta",component:we}]}]}),L=K(W);L.use(ke);L.mount("#app");window.env={VITE_MIXPANEL_KEY:"353ccd1349e6c925e87612a06201458e",VITE_UNLEASH_APP_NAME:"poc-unleash-client-app",VITE_UNLEASH_KEY:"some-secret",VITE_UNLEASH_URL:"https://unleash-proxy.dev-ap-south-1.cfood.xyz/proxy",BASE_URL:"/poc-unleash/",MODE:"production",DEV:!1,PROD:!0};
